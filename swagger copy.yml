openapi: 3.0.0
info:
  title: Roommaster API Documentation
  version: 1.0.0
  description: REST API documentation for Roommaster application
  license:
    name: ISC
    url: https://opensource.org/licenses/ISC
  contact:
    name: API Support
    email: support@roommaster.com
servers:
  - url: http://localhost:3000/v1
    description: Development server
  - url: https://api.roommaster.com/v1
    description: Production server
components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Enter your JWT token
  responses:
    Unauthorized:
      description: Unauthorized - Invalid or missing authentication token
      content:
        application/json:
          schema:
            type: object
            properties:
              code:
                type: number
                example: 401
              message:
                type: string
                example: Please authenticate
    Forbidden:
      description: Forbidden - Insufficient permissions
      content:
        application/json:
          schema:
            type: object
            properties:
              code:
                type: number
                example: 403
              message:
                type: string
                example: Forbidden
    NotFound:
      description: Not Found
      content:
        application/json:
          schema:
            type: object
            properties:
              code:
                type: number
                example: 404
              message:
                type: string
                example: Not found
    ValidationError:
      description: Validation Error
      content:
        application/json:
          schema:
            type: object
            properties:
              code:
                type: number
                example: 400
              message:
                type: string
                example: Validation error
              errors:
                type: array
                items:
                  type: object
                  properties:
                    field:
                      type: string
                    message:
                      type: string
security:
  - bearerAuth: []
paths:
  /customer/auth/register:
    post:
      summary: Customer registration
      description: Register a new customer account
      tags:
        - Customer Auth
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - fullName
                - phone
                - password
              properties:
                fullName:
                  type: string
                  maxLength: 100
                  description: Customer full name
                phone:
                  type: string
                  maxLength: 20
                  description: Customer phone number (unique)
                email:
                  type: string
                  format: email
                  description: Customer email (optional)
                password:
                  type: string
                  format: password
                  minLength: 8
                  description: Customer password (must contain letter and number)
                idNumber:
                  type: string
                  maxLength: 20
                  description: ID number (CMND/CCCD) - optional
                address:
                  type: string
                  description: Customer address - optional
              example:
                fullName: Nguyễn Văn A
                phone: '0901234567'
                email: customer@example.com
                password: password123
      responses:
        '201':
          description: Registration successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      customer:
                        type: object
                        properties:
                          id:
                            type: string
                          fullName:
                            type: string
                          phone:
                            type: string
                          email:
                            type: string
                      tokens:
                        type: object
                        properties:
                          access:
                            type: object
                            properties:
                              token:
                                type: string
                              expires:
                                type: string
                                format: date-time
                          refresh:
                            type: object
                            properties:
                              token:
                                type: string
                              expires:
                                type: string
                                format: date-time
        '400':
          $ref: '#/components/responses/ValidationError'
  /customer/auth/login:
    post:
      summary: Customer login
      description: Authenticate a customer and return access and refresh tokens
      tags:
        - Customer Auth
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - phone
                - password
              properties:
                phone:
                  type: string
                  description: Customer phone number
                password:
                  type: string
                  format: password
                  description: Customer password
              example:
                phone: '0901234567'
                password: password123
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      customer:
                        type: object
                      tokens:
                        type: object
        '401':
          description: Incorrect phone or password
  /customer/auth/logout:
    post:
      summary: Customer logout
      description: Logout a customer by invalidating the refresh token
      tags:
        - Customer Auth
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - refreshToken
              properties:
                refreshToken:
                  type: string
              example:
                refreshToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
      responses:
        '204':
          description: Logout successful
        '404':
          $ref: '#/components/responses/NotFound'
  /customer/auth/refresh-tokens:
    post:
      summary: Refresh auth tokens
      description: Generate new access and refresh tokens using a valid refresh token
      tags:
        - Customer Auth
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - refreshToken
              properties:
                refreshToken:
                  type: string
              example:
                refreshToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
      responses:
        '200':
          description: Tokens refreshed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      tokens:
                        type: object
        '401':
          $ref: '#/components/responses/Unauthorized'
  /customer/auth/forgot-password:
    post:
      summary: Forgot password
      description: Send a password reset token for the customer
      tags:
        - Customer Auth
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - phone
              properties:
                phone:
                  type: string
                  description: Customer phone number
              example:
                phone: '0901234567'
      responses:
        '200':
          description: Reset token generated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      resetPasswordToken:
                        type: string
        '404':
          $ref: '#/components/responses/NotFound'
  /customer/auth/reset-password:
    post:
      summary: Reset password
      description: Reset customer password using a valid reset token
      tags:
        - Customer Auth
      security: []
      parameters:
        - in: query
          name: token
          required: true
          schema:
            type: string
          description: Password reset token from forgot-password endpoint
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - password
              properties:
                password:
                  type: string
                  format: password
                  minLength: 8
                  description: New password (minimum 8 characters, must contain letter and number)
              example:
                password: newPassword123
      responses:
        '204':
          description: Password reset successful
        '401':
          description: Invalid or expired reset token
  /customer/auth/verify-email:
    get:
      summary: Verify customer email
      description: Verify customer email address using the token from verification email
      tags:
        - Customer Auth
      security: []
      parameters:
        - in: query
          name: token
          required: true
          schema:
            type: string
          description: Email verification token
      responses:
        '200':
          description: Email verified successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      message:
                        type: string
        '400':
          description: Email already verified or invalid token
        '401':
          description: Invalid or expired verification token
  /customer/auth/resend-verification:
    post:
      summary: Resend email verification
      description: Resend verification email to customer
      tags:
        - Customer Auth
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Verification email sent successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      message:
                        type: string
        '400':
          description: Email already verified or no email address
        '401':
          description: Unauthorized
  /customer/bookings:
    post:
      summary: Create a new booking
      description: Create a booking with automatic room allocation based on room type and count
      tags:
        - Customer Bookings
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - rooms
                - checkInDate
                - checkOutDate
                - totalGuests
              properties:
                rooms:
                  type: array
                  items:
                    type: object
                    required:
                      - roomId
                    properties:
                      roomId:
                        type: string
                        description: ID of the specific room to book
                  description: Array of room requests
                checkInDate:
                  type: string
                  format: date-time
                  description: Check-in date and time
                checkOutDate:
                  type: string
                  format: date-time
                  description: Check-out date and time
                totalGuests:
                  type: integer
                  minimum: 1
                  description: Total number of guests
              example:
                rooms:
                  - roomId: room_id_1
                  - roomId: room_id_2
                  - roomId: room_id_3
                checkInDate: '2025-12-25T14:00:00Z'
                checkOutDate: '2025-12-27T12:00:00Z'
                totalGuests: 4
      responses:
        '201':
          description: Booking created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      bookingId:
                        type: string
                      bookingCode:
                        type: string
                      expiresAt:
                        type: string
                        format: date-time
                      totalAmount:
                        type: number
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '409':
          description: Not enough available rooms
    get:
      summary: Get all bookings
      description: Retrieve a paginated list of bookings for the logged-in customer
      tags:
        - Customer Bookings
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
          description: Items per page
        - in: query
          name: status
          schema:
            type: string
            enum:
              - PENDING
              - CONFIRMED
              - CHECKED_IN
              - CHECKED_OUT
              - CANCELLED
          description: Filter by status
      responses:
        '200':
          description: List of bookings
        '401':
          description: Unauthorized
  /customer/bookings/{id}:
    get:
      summary: Get booking details
      description: Retrieve detailed information about a specific booking
      tags:
        - Customer Bookings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Booking ID
      responses:
        '200':
          description: Booking details retrieved successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /customer/bookings/{id}/cancel:
    post:
      summary: Cancel booking
      description: Cancel a pending booking
      tags:
        - Customer Bookings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Booking ID
      responses:
        '200':
          description: Booking cancelled successfully
        '400':
          description: Cannot cancel booking
        '401':
          description: Unauthorized
        '404':
          description: Booking not found
  /customer/rooms/{roomId}/images:
    get:
      summary: Get all images for a specific room
      description: Retrieve all images associated with a room, ordered by sortOrder
      tags:
        - Customer Images
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
          description: Room ID
      responses:
        '200':
          description: List of room images
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: string
                    roomId:
                      type: string
                    cloudinaryId:
                      type: string
                    url:
                      type: string
                    secureUrl:
                      type: string
                    thumbnailUrl:
                      type: string
                    width:
                      type: integer
                    height:
                      type: integer
                    format:
                      type: string
                    sortOrder:
                      type: integer
                    isDefault:
                      type: boolean
                    createdAt:
                      type: string
                      format: date-time
        '401':
          description: Unauthorized
        '404':
          description: Room not found
  /customer/room-types/{roomTypeId}/images:
    get:
      summary: Get all images for a specific room type
      description: Retrieve all images associated with a room type, ordered by sortOrder
      tags:
        - Customer Images
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomTypeId
          required: true
          schema:
            type: string
          description: Room Type ID
      responses:
        '200':
          description: List of room type images
          content:
            application/json:
              schema:
                type: array
                items:
                  type: object
                  properties:
                    id:
                      type: string
                    roomTypeId:
                      type: string
                    cloudinaryId:
                      type: string
                    url:
                      type: string
                    secureUrl:
                      type: string
                    thumbnailUrl:
                      type: string
                    width:
                      type: integer
                    height:
                      type: integer
                    format:
                      type: string
                    sortOrder:
                      type: integer
                    isDefault:
                      type: boolean
                    createdAt:
                      type: string
                      format: date-time
        '401':
          description: Unauthorized
        '404':
          description: Room type not found
  /customer/profile:
    get:
      summary: Get customer profile
      description: Retrieve the authenticated customer's profile information
      tags:
        - Customer Profile
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Profile retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      fullName:
                        type: string
                      phone:
                        type: string
                      email:
                        type: string
                      idNumber:
                        type: string
                      address:
                        type: string
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
        '401':
          $ref: '#/components/responses/Unauthorized'
    patch:
      summary: Update customer profile
      description: Update the authenticated customer's profile information
      tags:
        - Customer Profile
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                fullName:
                  type: string
                  maxLength: 100
                  description: Customer full name
                idNumber:
                  type: string
                  maxLength: 20
                  description: ID number (CMND/CCCD)
                address:
                  type: string
                  description: Customer address
                email:
                  type: string
                  format: email
                  description: Customer email
              example:
                fullName: Nguyễn Văn B
                email: updated@example.com
      responses:
        '200':
          description: Profile updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      fullName:
                        type: string
                      phone:
                        type: string
                      email:
                        type: string
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'
  /customer/profile/change-password:
    post:
      summary: Change customer password
      description: Change the authenticated customer's password
      tags:
        - Customer Profile
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - currentPassword
                - newPassword
              properties:
                currentPassword:
                  type: string
                  format: password
                  description: Current password
                newPassword:
                  type: string
                  format: password
                  minLength: 8
                  description: New password (minimum 8 characters)
              example:
                currentPassword: password123
                newPassword: newPassword456
      responses:
        '204':
          description: Password changed successfully
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          description: Incorrect current password or unauthorized
  /customer/promotions/available:
    get:
      summary: Get all available promotions (public listing)
      tags:
        - Customer Promotions
      security:
        - bearerAuth: []
  /customer/promotions/my-promotions:
    get:
      summary: Get customer's claimed promotions
      tags:
        - Customer Promotions
      security:
        - bearerAuth: []
  /customer/promotions/claim:
    post:
      summary: Claim a promotion by code
      tags:
        - Customer Promotions
      security:
        - bearerAuth: []
  /customer/ranks:
    get:
      summary: Get all VIP ranks
      tags:
        - Customer - Ranks
      responses:
        '200':
          description: List of all VIP ranks with benefits
  /customer/ranks/{id}:
    get:
      summary: Get rank details
      tags:
        - Customer - Ranks
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Rank details
  /customer/rooms:
    get:
      summary: Search rooms by current status
      description: Search rooms by current physical status. For booking, use /available endpoint instead.
      tags:
        - Customer Rooms
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Search by room number
        - in: query
          name: floor
          schema:
            type: integer
          description: Filter by floor number
        - in: query
          name: roomTypeId
          schema:
            type: string
          description: Filter by room type ID
        - in: query
          name: page
          schema:
            type: integer
            default: 1
      responses:
        '200':
          description: List of rooms
        '401':
          description: Unauthorized
  /customer/rooms/available:
    get:
      summary: Search rooms available for booking dates
      description: |
        **Primary endpoint for room search before booking.**
        Returns rooms that have no overlapping bookings for the specified date range.
        Results are grouped by room type for easy display.
        **Includes images:** Each room and room type includes associated images with full metadata.
      tags:
        - Customer Rooms
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: checkInDate
          required: true
          schema:
            type: string
            format: date-time
          description: Check-in date (ISO format, e.g., 2026-01-15)
        - in: query
          name: checkOutDate
          required: true
          schema:
            type: string
            format: date-time
          description: Check-out date (must be after checkInDate)
        - in: query
          name: roomTypeId
          schema:
            type: string
          description: Filter by room type ID
        - in: query
          name: floor
          schema:
            type: integer
          description: Filter by floor number
        - in: query
          name: minCapacity
          schema:
            type: integer
          description: Minimum room capacity
        - in: query
          name: maxCapacity
          schema:
            type: integer
          description: Maximum room capacity
        - in: query
          name: minPrice
          schema:
            type: number
          description: Minimum price per night
        - in: query
          name: maxPrice
          schema:
            type: number
            default: 1
          description: Maximum price per night
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Available rooms grouped by room type
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        roomType:
                          type: object
                        availableCount:
                          type: integer
                        rooms:
                          type: array
                  total:
                    type: integer
                  checkInDate:
                    type: string
                  checkOutDate:
                    type: string
        '400':
          description: Invalid date range
        '401':
          description: Unauthorized
  /customer/rooms/check-availability:
    post:
      summary: Bulk check room availability
      description: Check if multiple rooms are available for a date range. Use before creating a booking.
      tags:
        - Customer Rooms
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - roomIds
                - checkInDate
                - checkOutDate
              properties:
                roomIds:
                  type: array
                  items:
                    type: string
                  description: Array of room IDs to check
                checkInDate:
                  type: string
                  format: date-time
                checkOutDate:
                  type: string
                  format: date-time
      responses:
        '200':
          description: Availability status for each room
          content:
            application/json:
              schema:
                type: object
                properties:
                  allAvailable:
                    type: boolean
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        roomId:
                          type: string
                        roomNumber:
                          type: string
                        available:
                          type: boolean
                        reason:
                          type: string
        '400':
          description: Invalid request
        '401':
          description: Unauthorized
  /customer/rooms/{roomId}/availability:
    get:
      summary: Check single room availability
      description: Check if a specific room is available for a date range
      tags:
        - Customer Rooms
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
        - in: query
          name: checkInDate
          required: true
          schema:
            type: string
            format: date-time
        - in: query
          name: checkOutDate
          required: true
          schema:
            type: string
            format: date-time
      responses:
        '200':
          description: Room availability with conflict details
          content:
            application/json:
              schema:
                type: object
                properties:
                  available:
                    type: boolean
                  room:
                    type: object
                  conflictingBookings:
                    type: array
        '401':
          description: Unauthorized
        '404':
          description: Room not found
  /customer/rooms/{roomId}:
    get:
      summary: Get room details
      description: Get detailed information about a specific room including images for both the room and its room type
      tags:
        - Customer Rooms
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Room details
        '401':
          description: Unauthorized
        '404':
          description: Room not found
  /customer/service/service-usage:
    post:
      summary: Create a service usage record (DEPRECATED)
      description: |-
        **This endpoint is deprecated and no longer available for customers.**

        Service usage creation is now employee-only for better inventory control.
        Customers should contact staff to request services.
      deprecated: true
      tags:
        - Customer Services
      security:
        - bearerAuth: []
      responses:
        '501':
          description: Not Implemented - Service usage is now employee-only
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: number
                    example: 501
                  message:
                    type: string
                    example: Service usage creation is now employee-only. Please contact staff.
  /customer/service/service-usage/{id}:
    patch:
      summary: Update own service usage (DEPRECATED)
      description: |-
        **This endpoint is deprecated and no longer available for customers.**

        Service usage updates are now employee-only.
        Customers should contact staff to modify service requests.
      deprecated: true
      tags:
        - Customer Services
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '501':
          description: Not Implemented - Service usage updates are now employee-only
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: number
                    example: 501
                  message:
                    type: string
                    example: Service usage updates are now employee-only. Please contact staff.
  /employee/activities:
    get:
      summary: Get all activities
      description: Retrieve activity logs with filtering and pagination
      tags:
        - Employee Activities
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: type
          schema:
            type: string
            enum:
              - CREATE_BOOKING
              - UPDATE_BOOKING
              - CREATE_BOOKING_ROOM
              - UPDATE_BOOKING_ROOM
              - CREATE_SERVICE_USAGE
              - UPDATE_SERVICE_USAGE
              - CREATE_TRANSACTION
              - UPDATE_TRANSACTION
              - CREATE_CUSTOMER
              - CHECKED_IN
              - CHECKED_OUT
              - CREATE_PROMOTION
              - UPDATE_PROMOTION
              - CLAIM_PROMOTION
          description: Filter by activity type
        - in: query
          name: customerId
          schema:
            type: string
          description: Filter by customer ID
        - in: query
          name: employeeId
          schema:
            type: string
          description: Filter by employee ID
        - in: query
          name: bookingRoomId
          schema:
            type: string
          description: Filter by booking room ID
        - in: query
          name: serviceUsageId
          schema:
            type: string
          description: Filter by service usage ID
        - in: query
          name: startDate
          schema:
            type: string
            format: date-time
          description: Filter activities from this date
        - in: query
          name: endDate
          schema:
            type: string
            format: date-time
          description: Filter activities until this date
        - in: query
          name: search
          schema:
            type: string
          description: Search in activity description
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            default: 20
          description: Items per page
        - in: query
          name: sortBy
          schema:
            type: string
            enum:
              - createdAt
              - type
              - updatedAt
            default: createdAt
          description: Sort by field
        - in: query
          name: sortOrder
          schema:
            type: string
            enum:
              - asc
              - desc
            default: desc
          description: Sort order
      responses:
        '200':
          description: List of activities
        '401':
          description: Unauthorized
  /employee/activities/{activityId}:
    get:
      summary: Get activity by ID
      description: Get detailed information about a specific activity
      tags:
        - Employee Activities
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: activityId
          required: true
          schema:
            type: string
          description: Activity ID
      responses:
        '200':
          description: Activity details
        '401':
          description: Unauthorized
        '404':
          description: Activity not found
  /employee/app-settings:
    get:
      summary: Get all app settings
      tags:
        - Employee App Settings
      security:
        - bearerAuth: []
      responses:
        '200':
          description: List of all app settings
        '401':
          description: Unauthorized
  /employee/app-settings/checkin-time:
    get:
      summary: Get check-in time configuration
      tags:
        - Employee App Settings
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Check-in time configuration
    put:
      summary: Update check-in time configuration
      tags:
        - Employee App Settings
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - hour
                - minute
                - gracePeriodMinutes
              properties:
                hour:
                  type: integer
                  minimum: 0
                  maximum: 23
                minute:
                  type: integer
                  minimum: 0
                  maximum: 59
                gracePeriodMinutes:
                  type: integer
                  minimum: 0
                  maximum: 240
      responses:
        '200':
          description: Check-in time updated successfully
  /employee/app-settings/checkout-time:
    get:
      summary: Get check-out time configuration
      tags:
        - Employee App Settings
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Check-out time configuration
    put:
      summary: Update check-out time configuration
      tags:
        - Employee App Settings
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - hour
                - minute
                - gracePeriodMinutes
              properties:
                hour:
                  type: integer
                  minimum: 0
                  maximum: 23
                minute:
                  type: integer
                  minimum: 0
                  maximum: 59
                gracePeriodMinutes:
                  type: integer
                  minimum: 0
                  maximum: 240
      responses:
        '200':
          description: Check-out time updated successfully
  /employee/app-settings/{key}:
    get:
      summary: Get app setting by key
      tags:
        - Employee App Settings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: key
          required: true
          schema:
            type: string
          description: App setting key (e.g., DEPOSIT_PERCENTAGE, CHECKIN_TIME, CHECKOUT_TIME)
          example: DEPOSIT_PERCENTAGE
      responses:
        '200':
          description: App setting value
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  data:
                    type: object
                    properties:
                      key:
                        type: string
                        example: DEPOSIT_PERCENTAGE
                      value:
                        type: object
                        description: Setting value (structure varies by key)
                        example:
                          percentage: 50
        '401':
          description: Unauthorized
        '404':
          description: Setting not found
    put:
      summary: Update app setting by key
      tags:
        - Employee App Settings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: key
          required: true
          schema:
            type: string
          description: App setting key (e.g., DEPOSIT_PERCENTAGE, CHECKIN_TIME, CHECKOUT_TIME)
          example: DEPOSIT_PERCENTAGE
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - value
              properties:
                value:
                  type: object
                  description: Setting value (structure varies by key)
                  example:
                    percentage: 30
      responses:
        '200':
          description: App setting updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: App setting 'DEPOSIT_PERCENTAGE' updated successfully
                  data:
                    type: object
                    properties:
                      key:
                        type: string
                        example: DEPOSIT_PERCENTAGE
                      value:
                        type: object
                        example:
                          percentage: 30
        '401':
          description: Unauthorized
        '404':
          description: Setting not found
  /employee/auth/login:
    post:
      summary: Employee login
      description: Authenticate an employee and return access and refresh tokens
      tags:
        - Employee Auth
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - username
                - password
              properties:
                username:
                  type: string
                  description: Employee username
                password:
                  type: string
                  format: password
                  description: Employee password
              example:
                username: admin
                password: password123
      responses:
        '200':
          description: Login successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      employee:
                        type: object
                        properties:
                          id:
                            type: string
                            example: clq1234567890abcdef
                          name:
                            type: string
                            example: Nguyễn Văn Admin
                          username:
                            type: string
                            example: admin
                          role:
                            type: string
                            example: ADMIN
                          updatedAt:
                            type: string
                            format: date-time
                      tokens:
                        type: object
                        properties:
                          access:
                            type: object
                            properties:
                              token:
                                type: string
                              expires:
                                type: string
                                format: date-time
                          refresh:
                            type: object
                            properties:
                              token:
                                type: string
                              expires:
                                type: string
                                format: date-time
        '401':
          description: Incorrect username or password
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: number
                    example: 401
                  message:
                    type: string
                    example: Incorrect username or password
  /employee/auth/logout:
    post:
      summary: Employee logout
      description: Logout an employee by invalidating the refresh token
      tags:
        - Employee Auth
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - refreshToken
              properties:
                refreshToken:
                  type: string
                  description: Refresh token to invalidate
              example:
                refreshToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
      responses:
        '204':
          description: Logout successful
        '404':
          $ref: '#/components/responses/NotFound'
  /employee/auth/refresh-tokens:
    post:
      summary: Refresh auth tokens
      description: Generate new access and refresh tokens using a valid refresh token
      tags:
        - Employee Auth
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - refreshToken
              properties:
                refreshToken:
                  type: string
                  description: Valid refresh token
              example:
                refreshToken: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
      responses:
        '200':
          description: Tokens refreshed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      tokens:
                        type: object
                        properties:
                          access:
                            type: object
                            properties:
                              token:
                                type: string
                              expires:
                                type: string
                                format: date-time
                          refresh:
                            type: object
                            properties:
                              token:
                                type: string
                              expires:
                                type: string
                                format: date-time
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/auth/forgot-password:
    post:
      summary: Forgot password
      description: Generate a password reset token for the employee
      tags:
        - Employee Auth
      security: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - username
              properties:
                username:
                  type: string
                  description: Employee username
              example:
                username: admin
      responses:
        '200':
          description: Reset token generated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      resetPasswordToken:
                        type: string
                        example: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
        '404':
          $ref: '#/components/responses/NotFound'
  /employee/auth/reset-password:
    post:
      summary: Reset password
      description: Reset employee password using a valid reset token
      tags:
        - Employee Auth
      security: []
      parameters:
        - in: query
          name: token
          required: true
          schema:
            type: string
          description: Password reset token from forgot-password endpoint
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - password
              properties:
                password:
                  type: string
                  format: password
                  minLength: 8
                  description: New password (minimum 8 characters, must contain letter and number)
              example:
                password: newPassword123
      responses:
        '204':
          description: Password reset successful
        '401':
          description: Invalid or expired reset token
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: number
                    example: 401
                  message:
                    type: string
                    example: Password reset failed
  /employee/auth/permissions:
    get:
      summary: Get current employee permissions
      description: |
        Returns the permissions for the authenticated employee's role.
        Use this to build UI elements:
        - `screens`: List of screens the employee can access (for sidebar menu)
        - `actions`: List of action permissions (for button visibility)
        - `permissions`: Raw CASL permissions (for frontend CASL instance)
      tags:
        - Employee Auth
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Employee permissions retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      role:
                        type: object
                        properties:
                          id:
                            type: string
                          name:
                            type: string
                            example: RECEPTIONIST
                          description:
                            type: string
                            example: Front desk operations
                      screens:
                        type: array
                        description: Screens the employee can access
                        items:
                          type: object
                          properties:
                            name:
                              type: string
                              example: screen:booking
                            subject:
                              type: string
                              example: Booking
                            description:
                              type: string
                              example: Booking Management
                      actions:
                        type: array
                        description: Action permissions
                        items:
                          type: string
                          example: booking:create
                      permissions:
                        type: array
                        description: Raw permissions for frontend CASL
                        items:
                          type: object
                          properties:
                            action:
                              type: string
                              example: create
                            subject:
                              type: string
                              example: Booking
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Role not found
  /employee/bookings:
    get:
      summary: Get all bookings
      description: Retrieve a paginated list of bookings with filters
      tags:
        - Employee Bookings
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
          description: Items per page
        - in: query
          name: search
          schema:
            type: string
          description: Search by booking code, customer name or phone
        - in: query
          name: status
          schema:
            type: string
            enum:
              - PENDING
              - CONFIRMED
              - CHECKED_IN
              - CHECKED_OUT
              - CANCELLED
          description: Filter by status
        - in: query
          name: startDate
          schema:
            type: string
            format: date-time
          description: Filter by check-in date start
        - in: query
          name: endDate
          schema:
            type: string
            format: date-time
          description: Filter by check-in date end
      responses:
        '200':
          description: List of bookings
        '401':
          description: Unauthorized
    post:
      summary: Create a booking
      description: |
        Create a booking for walk-in customers or phone reservations.
        Must provide either customerId (existing customer) OR customer object (new customer), not both.
      tags:
        - Employee Bookings
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - rooms
                - checkInDate
                - checkOutDate
                - totalGuests
              properties:
                customerId:
                  type: string
                  description: Existing customer ID (use this OR customer, not both)
                customer:
                  type: object
                  required:
                    - fullName
                    - phone
                  properties:
                    fullName:
                      type: string
                    phone:
                      type: string
                    email:
                      type: string
                    idNumber:
                      type: string
                    address:
                      type: string
                  description: New customer details (use this OR customerId, not both)
                rooms:
                  type: array
                  items:
                    type: object
                    required:
                      - roomId
                    properties:
                      roomId:
                        type: string
                        description: ID of the specific room to book
                checkInDate:
                  type: string
                  format: date-time
                checkOutDate:
                  type: string
                  format: date-time
                totalGuests:
                  type: integer
                  minimum: 1
                depositAmount:
                  type: number
                  minimum: 0
                  description: Optional deposit amount
                depositPaymentMethod:
                  type: string
                  enum:
                    - CASH
                    - CREDIT_CARD
                    - DEBIT_CARD
                    - BANK_TRANSFER
                    - MOMO
                    - ZALOPAY
                  description: Payment method for deposit (required if depositAmount provided)
      responses:
        '201':
          description: Booking created successfully
        '400':
          description: Validation error
        '401':
          description: Unauthorized
  /employee/bookings/check-in:
    post:
      summary: Check in specific booking rooms with customer assignments
      description: |
        Check in one or more booking rooms and assign customers to each room.
        **Important:** All booking rooms must be in CONFIRMED status (not PENDING).
        Rooms must also be in AVAILABLE or RESERVED status.
      tags:
        - Employee Bookings
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - checkInInfo
              properties:
                checkInInfo:
                  type: array
                  items:
                    type: object
                    required:
                      - bookingRoomId
                      - customerIds
                    properties:
                      bookingRoomId:
                        type: string
                        description: Booking room ID to check in
                      customerIds:
                        type: array
                        items:
                          type: string
                        description: List of customer IDs staying in this room
              example:
                checkInInfo:
                  - bookingRoomId: booking_room_id_1
                    customerIds:
                      - customer_id_1
                      - customer_id_2
                  - bookingRoomId: booking_room_id_2
                    customerIds:
                      - customer_id_3
      responses:
        '200':
          description: Check-in successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      bookingRooms:
                        type: array
                        description: Updated booking rooms with customer assignments
        '400':
          description: Invalid booking status or validation error
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /employee/bookings/check-out:
    post:
      summary: Check out specific booking rooms
      description: Check out one or more booking rooms and update room status to available
      tags:
        - Employee Bookings
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - bookingRoomIds
              properties:
                bookingRoomIds:
                  type: array
                  items:
                    type: string
                  description: List of booking room IDs to check out
              example:
                bookingRoomIds:
                  - booking_room_id_1
                  - booking_room_id_2
      responses:
        '200':
          description: Check-out successful
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      bookingRooms:
                        type: array
                        description: Updated booking rooms after check-out
        '400':
          description: Invalid booking status or validation error
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /employee/bookings/{id}:
    get:
      summary: Get booking details
      description: Retrieve detailed information about a specific booking
      tags:
        - Employee Bookings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Booking ID
      responses:
        '200':
          description: Booking details retrieved successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      summary: Update booking
      description: Update booking details
      tags:
        - Employee Bookings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Booking ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                checkInDate:
                  type: string
                  format: date-time
                checkOutDate:
                  type: string
                  format: date-time
                totalGuests:
                  type: integer
                status:
                  type: string
                  enum:
                    - PENDING
                    - CONFIRMED
                    - CHECKED_IN
                    - CHECKED_OUT
                    - CANCELLED
                rooms:
                  type: array
                  items:
                    type: object
                    required:
                      - roomId
                    properties:
                      roomId:
                        type: string
                        description: ID of the specific room
      responses:
        '200':
          description: Booking updated successfully
        '400':
          description: Validation error
        '401':
          description: Unauthorized
        '404':
          description: Booking not found
  /employee/bookings/{id}/cancel:
    post:
      summary: Cancel booking
      description: Cancel a booking
      tags:
        - Employee Bookings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Booking ID
      responses:
        '200':
          description: Booking cancelled successfully
        '400':
          description: Cannot cancel booking
        '401':
          description: Unauthorized
        '404':
          description: Booking not found
  /employee/bookings/rooms/{bookingRoomId}/change-room:
    post:
      summary: Change room for a checked-in booking
      description: Transfer a customer from their current room to a new available room. Only works for bookings that are currently checked in. The new room must be available for the remaining duration of the stay.
      tags:
        - Employee Bookings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: bookingRoomId
          required: true
          schema:
            type: string
          description: The booking room ID (not the room ID)
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - newRoomId
              properties:
                newRoomId:
                  type: string
                  description: The ID of the new room to transfer to
                reason:
                  type: string
                  maxLength: 500
                  description: Optional reason for the room change
            example:
              newRoomId: room-456
              reason: Customer requested quieter room
      responses:
        '200':
          description: Room changed successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      bookingRoom:
                        type: object
                        description: Updated booking room with new room details
                      priceAdjustment:
                        type: object
                        properties:
                          oldPricePerNight:
                            type: number
                          newPricePerNight:
                            type: number
                          remainingNights:
                            type: integer
                          priceDifference:
                            type: number
                            description: Positive for upgrade, negative for downgrade
        '400':
          description: Invalid request - booking not checked in or same room
        '404':
          description: Booking room or new room not found
        '409':
          description: New room is not available for the remaining stay period
  /employee/bookings/rooms/{bookingRoomId}/customers:
    put:
      summary: Update customers for a booking room
      description: Replace the list of customers for a specific booking room
      tags:
        - Employee Bookings
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: bookingRoomId
          required: true
          schema:
            type: string
          description: Booking room ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - customerIds
              properties:
                customerIds:
                  type: array
                  items:
                    type: string
                  minItems: 1
                  description: List of customer IDs
      responses:
        '200':
          description: Customers updated successfully
        '400':
          description: Validation error
        '404':
          description: Booking room or customer not found
  /employee/customer-rank/statistics:
    get:
      summary: Get customer rank statistics
      description: Retrieve statistics about customer distribution across different ranks
      tags:
        - Employee Customer Rank
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Statistics retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    description: Rank statistics data
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/customer-rank:
    get:
      summary: Get all customer ranks
      description: Retrieve a list of all customer ranks
      tags:
        - Employee Customer Rank
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Customer ranks retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                          example: '1'
                        name:
                          type: string
                          example: gold
                        displayName:
                          type: string
                          example: Gold Member
                        description:
                          type: string
                          example: Premium membership tier
                        minSpending:
                          type: number
                          example: 5000000
                        maxSpending:
                          type: number
                          example: 10000000
                        benefits:
                          type: string
                          example: 10% discount, priority booking
                        color:
                          type: string
                          example: '#FFD700'
                        createdAt:
                          type: string
                          format: date-time
                        updatedAt:
                          type: string
                          format: date-time
        '401':
          $ref: '#/components/responses/Unauthorized'
    post:
      summary: Create a new customer rank
      description: Create a new customer rank tier with spending thresholds and benefits
      tags:
        - Employee Customer Rank
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - displayName
                - minSpending
              properties:
                name:
                  type: string
                  description: Unique identifier name for the rank
                  example: platinum
                displayName:
                  type: string
                  description: Display name for the rank
                  example: Platinum Member
                description:
                  type: string
                  description: Description of the rank
                  example: Elite membership tier with exclusive benefits
                minSpending:
                  type: number
                  minimum: 0
                  description: Minimum spending amount to achieve this rank
                  example: 10000000
                maxSpending:
                  type: number
                  minimum: 0
                  description: Maximum spending amount for this rank (optional)
                  example: 20000000
                benefits:
                  type: string
                  description: Benefits description for this rank
                  example: 20% discount, free upgrades, priority support
                color:
                  type: string
                  description: Color code for UI display
                  example: '#E5E4E2'
      responses:
        '201':
          description: Customer rank created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      name:
                        type: string
                      displayName:
                        type: string
                      description:
                        type: string
                      minSpending:
                        type: number
                      maxSpending:
                        type: number
                      benefits:
                        type: string
                      color:
                        type: string
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/customer-rank/{id}:
    get:
      summary: Get customer rank by ID
      description: Retrieve detailed information about a specific customer rank
      tags:
        - Employee Customer Rank
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Customer rank ID
          example: '1'
      responses:
        '200':
          description: Customer rank retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      name:
                        type: string
                      displayName:
                        type: string
                      description:
                        type: string
                      minSpending:
                        type: number
                      maxSpending:
                        type: number
                      benefits:
                        type: string
                      color:
                        type: string
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      summary: Update customer rank
      description: Update an existing customer rank's information
      tags:
        - Employee Customer Rank
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Customer rank ID
          example: '1'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  description: Unique identifier name for the rank
                  example: gold
                displayName:
                  type: string
                  description: Display name for the rank
                  example: Gold Member
                description:
                  type: string
                  description: Description of the rank
                  example: Premium membership tier
                minSpending:
                  type: number
                  minimum: 0
                  description: Minimum spending amount to achieve this rank
                  example: 5000000
                maxSpending:
                  type: number
                  minimum: 0
                  description: Maximum spending amount for this rank
                  example: 10000000
                benefits:
                  type: string
                  description: Benefits description for this rank
                  example: 15% discount, priority booking
                color:
                  type: string
                  description: Color code for UI display
                  example: '#FFD700'
      responses:
        '200':
          description: Customer rank updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      name:
                        type: string
                      displayName:
                        type: string
                      description:
                        type: string
                      minSpending:
                        type: number
                      maxSpending:
                        type: number
                      benefits:
                        type: string
                      color:
                        type: string
                      updatedAt:
                        type: string
                        format: date-time
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      summary: Delete customer rank
      description: Delete an existing customer rank
      tags:
        - Employee Customer Rank
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Customer rank ID
          example: '1'
      responses:
        '204':
          description: Customer rank deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /employee/customers:
    post:
      summary: Create a new customer
      description: Create a new customer account (employee only)
      tags:
        - Customer Management
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - fullName
                - phone
                - password
              properties:
                fullName:
                  type: string
                  maxLength: 100
                  description: Customer full name
                phone:
                  type: string
                  maxLength: 20
                  description: Customer phone number (unique)
                password:
                  type: string
                  format: password
                  minLength: 8
                  description: Customer password (min 8 characters, must contain letter and number)
                email:
                  type: string
                  format: email
                  description: Customer email (optional)
                idNumber:
                  type: string
                  maxLength: 20
                  description: ID number (CMND/CCCD)
                address:
                  type: string
                  description: Customer address
              example:
                isEmailVerified:
                  type: boolean
                  description: Whether email is verified (employee can set directly)
                fullName: Nguyễn Văn A
                phone: '0901234567'
                password: password123
                email: nguyenvana@example.com
                idNumber: '001234567890'
                address: 123 Đường Lê Lợi, Quận 1, TP.HCM
      responses:
        '201':
          description: Customer created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        example: clq1234567890abcdef
                      fullName:
                        type: string
                        example: Nguyễn Văn A
                      phone:
                        type: string
                        example: '0901234567'
                      email:
                        type: string
                        example: nguyenvana@example.com
                      idNumber:
                        type: string
                        example: '001234567890'
                      address:
                        type: string
                        example: 123 Đường Lê Lợi, Quận 1, TP.HCM
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
        '400':
          description: Phone number already registered or validation error
        '401':
          $ref: '#/components/responses/Unauthorized'
    get:
      summary: Get all customers
      description: Retrieve a paginated list of customers with optional filters
      tags:
        - Customer Management
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Search by name, phone, or email
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
          description: Number of items per page
        - in: query
          name: sortBy
          schema:
            type: string
            enum:
              - fullName
              - phone
              - email
              - createdAt
              - updatedAt
            default: createdAt
          description: Field to sort by
        - in: query
          name: sortOrder
          schema:
            type: string
            enum:
              - asc
              - desc
            default: desc
          description: Sort order
      responses:
        '200':
          description: Customers retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                            fullName:
                              type: string
                            phone:
                              type: string
                            email:
                              type: string
                            idNumber:
                              type: string
                            address:
                              type: string
                            createdAt:
                              type: string
                              format: date-time
                            updatedAt:
                              type: string
                              format: date-time
                            _count:
                              type: object
                              properties:
                                bookings:
                                  type: integer
                      total:
                        type: integer
                        example: 50
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/customers/{customerId}:
    get:
      summary: Get customer by ID
      description: Retrieve a specific customer's details
      tags:
        - Customer Management
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: customerId
          required: true
          schema:
            type: string
          description: Customer ID
      responses:
        '200':
          description: Customer retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        example: clq1234567890abcdef
                      fullName:
                        type: string
                        example: Nguyễn Văn A
                      phone:
                        type: string
                        example: '0901234567'
                      email:
                        type: string
                        example: nguyenvana@example.com
                      idNumber:
                        type: string
                        example: '001234567890'
                      address:
                        type: string
                        example: 123 Đường Lê Lợi, Quận 1, TP.HCM
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      summary: Update customer
      description: Update a customer's information
      tags:
        - Customer Management
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: customerId
          required: true
          schema:
            type: string
          description: Customer ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              minProperties: 1
              properties:
                fullName:
                  type: string
                  maxLength: 100
                  description: Customer full name
                email:
                  type: string
                  format: email
                  description: Customer email
                idNumber:
                  type: string
                  maxLength: 20
                  description: ID number (CMND/CCCD)
                address:
                  type: string
                  description: Customer address
              example:
                fullName: Nguyễn Văn B
                email: nguyenvanb@example.com
      responses:
        '200':
          description: Customer updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      fullName:
                        type: string
                      phone:
                        type: string
                      email:
                        type: string
                      idNumber:
                        type: string
                      address:
                        type: string
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
        '400':
          description: Email already in use or validation error
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      summary: Delete customer
      description: Delete a customer from the system
      tags:
        - Customer Management
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: customerId
          required: true
          schema:
            type: string
          description: Customer ID
      responses:
        '204':
          description: Customer deleted successfully
        '400':
          description: Cannot delete customer with booking history
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /employee/employees:
    post:
      summary: Create a new employee
      description: Create a new employee account with assigned role (admin only)
      tags:
        - Employee Management
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - username
                - password
                - roleId
              properties:
                name:
                  type: string
                  maxLength: 100
                  description: Employee name
                username:
                  type: string
                  maxLength: 50
                  description: Employee username (unique)
                password:
                  type: string
                  format: password
                  minLength: 8
                  description: Employee password (min 8 characters, must contain letter and number)
                roleId:
                  type: string
                  description: Role ID (required - use /employee/roles to get available roles)
              example:
                name: Trần Văn B
                username: tranvanb
                password: password123
                roleId: clq1234567890abcdef
      responses:
        '201':
          description: Employee created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        example: clq1234567890abcdef
                      name:
                        type: string
                        example: Trần Văn B
                      username:
                        type: string
                        example: tranvanb
                      roleId:
                        type: string
                        example: clq1234567890abcdef
                      roleRef:
                        type: object
                        properties:
                          id:
                            type: string
                          name:
                            type: string
                          description:
                            type: string
                      updatedAt:
                        type: string
                        format: date-time
        '400':
          description: Username already exists, role not found, or validation error
        '401':
          $ref: '#/components/responses/Unauthorized'
    get:
      summary: Get all employees
      description: Retrieve a paginated list of employees with optional filters
      tags:
        - Employee Management
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Search by name or username
        - in: query
          name: roleId
          schema:
            type: string
          description: Filter by role ID
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
          description: Number of items per page
        - in: query
          name: sortBy
          schema:
            type: string
            enum:
              - name
              - username
              - roleId
              - createdAt
              - updatedAt
            default: createdAt
          description: Field to sort by
        - in: query
          name: sortOrder
          schema:
            type: string
            enum:
              - asc
              - desc
            default: desc
          description: Sort order
      responses:
        '200':
          description: Employees retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                            name:
                              type: string
                            username:
                              type: string
                            role:
                              type: string
                            updatedAt:
                              type: string
                              format: date-time
                      total:
                        type: integer
                        example: 20
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/employees/{employeeId}:
    get:
      summary: Get employee by ID
      description: Retrieve a specific employee's details
      tags:
        - Employee Management
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: employeeId
          required: true
          schema:
            type: string
          description: Employee ID
      responses:
        '200':
          description: Employee retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        example: clq1234567890abcdef
                      name:
                        type: string
                        example: Trần Văn B
                      username:
                        type: string
                        example: tranvanb
                      role:
                        type: string
                        example: RECEPTIONIST
                      updatedAt:
                        type: string
                        format: date-time
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      summary: Update employee
      description: Update an employee's information
      tags:
        - Employee Management
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: employeeId
          required: true
          schema:
            type: string
          description: Employee ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              minProperties: 1
              properties:
                name:
                  type: string
                  maxLength: 100
                  description: Employee name
                roleId:
                  type: string
                  description: Role ID
              example:
                name: Trần Văn C
                roleId: clq1234567890abcdef
      responses:
        '200':
          description: Employee updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      name:
                        type: string
                      username:
                        type: string
                      role:
                        type: string
                      updatedAt:
                        type: string
                        format: date-time
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      summary: Delete employee
      description: Delete an employee from the system
      tags:
        - Employee Management
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: employeeId
          required: true
          schema:
            type: string
          description: Employee ID
      responses:
        '204':
          description: Employee deleted successfully
        '400':
          description: Cannot delete employee with transaction history
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /employee/permissions:
    get:
      summary: Get all permissions
      description: Retrieve a list of permissions with filters
      tags:
        - Permissions
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Search by name or description
        - in: query
          name: type
          schema:
            type: string
            enum:
              - SCREEN
              - ACTION
          description: Filter by permission type
        - in: query
          name: subject
          schema:
            type: string
          description: Filter by subject (e.g., Booking, Room)
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 500
            default: 100
        - in: query
          name: sortBy
          schema:
            type: string
            enum:
              - name
              - type
              - subject
              - action
              - createdAt
              - updatedAt
            default: name
        - in: query
          name: sortOrder
          schema:
            type: string
            enum:
              - asc
              - desc
            default: asc
      responses:
        '200':
          description: Permissions retrieved successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/permissions/grouped:
    get:
      summary: Get permissions grouped by subject
      description: Retrieve all permissions organized by subject with screens and actions
      tags:
        - Permissions
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Grouped permissions retrieved successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/permissions/screens:
    get:
      summary: Get all screen permissions
      description: Retrieve all screen-type permissions
      tags:
        - Permissions
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Screen permissions retrieved successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/permissions/actions:
    get:
      summary: Get all action permissions
      description: Retrieve all action-type permissions
      tags:
        - Permissions
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Action permissions retrieved successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/permissions/{permissionId}:
    get:
      summary: Get permission by ID
      description: Retrieve a specific permission with its details
      tags:
        - Permissions
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: permissionId
          required: true
          schema:
            type: string
          description: Permission ID
      responses:
        '200':
          description: Permission retrieved successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Permission not found
  /employee/pricing-rules:
    post:
      summary: Create a new pricing rule
      description: Create a new pricing rule for room types with custom pricing conditions
      tags:
        - Employee Pricing Rules
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - roomTypeId
                - adjustmentType
                - adjustmentValue
              properties:
                name:
                  type: string
                roomTypeId:
                  type: string
                adjustmentType:
                  type: string
                  enum:
                    - PERCENTAGE
                    - FIXED
                adjustmentValue:
                  type: number
      responses:
        '201':
          description: Pricing rule created successfully
        '400':
          description: Validation error
        '401':
          $ref: '#/components/responses/Unauthorized'
    get:
      summary: Get all pricing rules
      description: Retrieve a list of all pricing rules with pagination
      tags:
        - Employee Pricing Rules
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: List of pricing rules retrieved successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/pricing-rules/{id}:
    get:
      summary: Get a pricing rule by ID
      description: Retrieve detailed information about a specific pricing rule
      tags:
        - Employee Pricing Rules
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Pricing rule retrieved successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      summary: Update a pricing rule
      description: Update an existing pricing rule
      tags:
        - Employee Pricing Rules
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                adjustmentType:
                  type: string
                  enum:
                    - PERCENTAGE
                    - FIXED
                adjustmentValue:
                  type: number
      responses:
        '200':
          description: Pricing rule updated successfully
        '400':
          description: Validation error
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      summary: Delete a pricing rule
      description: Soft delete a pricing rule (mark as inactive)
      tags:
        - Employee Pricing Rules
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Pricing rule deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /employee/pricing-rules/{id}/reorder:
    post:
      summary: Reorder a pricing rule
      description: Change the priority order of a pricing rule (for drag and drop UI)
      tags:
        - Employee Pricing Rules
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - newPosition
              properties:
                newPosition:
                  type: integer
                  minimum: 0
      responses:
        '200':
          description: Pricing rule reordered successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /employee/profile:
    get:
      summary: Get employee profile
      description: Retrieve the authenticated employee's profile information
      tags:
        - Employee Profile
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Profile retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      name:
                        type: string
                      username:
                        type: string
                      role:
                        type: string
                        enum:
                          - ADMIN
                          - RECEPTIONIST
                          - HOUSEKEEPING
                          - STAFF
                      updatedAt:
                        type: string
                        format: date-time
        '401':
          $ref: '#/components/responses/Unauthorized'
    patch:
      summary: Update employee profile
      description: Update the authenticated employee's profile information
      tags:
        - Employee Profile
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  maxLength: 100
                  description: Employee name
              example:
                name: Nguyễn Văn Updated
      responses:
        '200':
          description: Profile updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      name:
                        type: string
                      username:
                        type: string
                      role:
                        type: string
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/profile/change-password:
    post:
      summary: Change employee password
      description: Change the authenticated employee's password
      tags:
        - Employee Profile
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - currentPassword
                - newPassword
              properties:
                currentPassword:
                  type: string
                  format: password
                  description: Current password
                newPassword:
                  type: string
                  format: password
                  minLength: 8
                  description: New password (minimum 8 characters)
              example:
                currentPassword: password123
                newPassword: newPassword456
      responses:
        '204':
          description: Password changed successfully
        '400':
          $ref: '#/components/responses/ValidationError'
        '401':
          description: Incorrect current password or unauthorized
  /employee/promotions:
    post:
      summary: Create a new promotion
      tags:
        - Employee Promotions
      security:
        - bearerAuth: []
    get:
      summary: Get all promotions
      tags:
        - Employee Promotions
      security:
        - bearerAuth: []
  /employee/promotions/{id}:
    patch:
      summary: Update a promotion
      tags:
        - Employee Promotions
      security:
        - bearerAuth: []
  /employee/reports/rooms/availability:
    get:
      summary: Check room availability at specific time
      description: Get current room status breakdown (available, occupied, reserved) for a date range
      tags:
        - Employee Reports
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: checkInDate
          required: true
          schema:
            type: string
            format: date
          description: Check-in date for availability check (ISO format)
        - in: query
          name: checkOutDate
          required: true
          schema:
            type: string
            format: date
          description: Check-out date for availability check (ISO format)
        - in: query
          name: roomTypeId
          schema:
            type: string
          description: Filter by specific room type
        - in: query
          name: capacity
          schema:
            type: integer
          description: Minimum room capacity required
        - in: query
          name: floor
          schema:
            type: integer
          description: Filter by floor number
        - in: query
          name: minPrice
          schema:
            type: number
          description: Minimum price per night
        - in: query
          name: maxPrice
          schema:
            type: number
          description: Maximum price per night
      responses:
        '200':
          description: Room availability breakdown
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Requires Reports access
  /employee/reports/rooms/occupancy-forecast:
    get:
      summary: Get room occupancy forecast
      description: Calculate occupancy rate forecast by day, week, or month with detailed breakdown
      tags:
        - Employee Reports
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: startDate
          required: true
          schema:
            type: string
            format: date
          description: Start date for forecast period
        - in: query
          name: endDate
          required: true
          schema:
            type: string
            format: date
          description: End date for forecast period
        - in: query
          name: groupBy
          schema:
            type: string
            enum:
              - day
              - week
              - month
            default: day
          description: Grouping interval for forecast
      responses:
        '200':
          description: Occupancy forecast with rates and counts
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Requires Reports access
  /employee/reports/customers/stay-history:
    get:
      summary: Get customer stay history
      description: List all customers with their booking history, total nights, and spending
      tags:
        - Employee Reports
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: fromDate
          schema:
            type: string
            format: date
          description: Filter bookings from this date
        - in: query
          name: toDate
          schema:
            type: string
            format: date
          description: Filter bookings until this date
        - in: query
          name: rankId
          schema:
            type: string
          description: Filter by customer rank
        - in: query
          name: minStays
          schema:
            type: integer
          description: Minimum number of stays
        - in: query
          name: minTotalSpent
          schema:
            type: number
          description: Minimum total amount spent
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            default: 20
          description: Records per page
        - in: query
          name: sortBy
          schema:
            type: string
            enum:
              - totalSpent
              - totalStays
              - lastVisit
            default: totalSpent
          description: Sort field
        - in: query
          name: sortOrder
          schema:
            type: string
            enum:
              - asc
              - desc
            default: desc
          description: Sort direction
      responses:
        '200':
          description: Paginated customer stay history
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Requires Reports access
  /employee/reports/customers/first-time-guests:
    get:
      summary: Get first-time guests
      description: List customers who made their first booking in the specified period
      tags:
        - Employee Reports
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: fromDate
          required: true
          schema:
            type: string
            format: date
          description: Period start date
        - in: query
          name: toDate
          required: true
          schema:
            type: string
            format: date
          description: Period end date
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            default: 20
          description: Records per page
      responses:
        '200':
          description: List of first-time guests with booking details
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Requires Reports access
  /employee/reports/customers/lifetime-value:
    get:
      summary: Get customer lifetime value (CLV)
      description: Calculate CLV for customers with scoring based on spending, frequency, and recency
      tags:
        - Employee Reports
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: limit
          schema:
            type: integer
            default: 50
          description: Number of top customers to return
      responses:
        '200':
          description: Customer lifetime value analytics with CLV scores
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Requires Reports access
  /employee/reports/customers/rank-distribution:
    get:
      summary: Get customer rank distribution
      description: Show customer count and revenue breakdown by loyalty rank
      tags:
        - Employee Reports
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Customer rank distribution with counts and revenue
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Requires Reports access
  /employee/reports/employees/booking-performance:
    get:
      summary: Get employee booking performance
      description: Track employee performance in check-ins, checkouts, and booking revenue
      tags:
        - Employee Reports
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: fromDate
          required: true
          schema:
            type: string
            format: date
          description: Period start date
        - in: query
          name: toDate
          required: true
          schema:
            type: string
            format: date
          description: Period end date
        - in: query
          name: employeeId
          schema:
            type: string
          description: Filter by specific employee
        - in: query
          name: sortBy
          schema:
            type: string
            enum:
              - totalBookings
              - totalRevenue
              - totalTransactions
            default: totalRevenue
          description: Sort field
        - in: query
          name: sortOrder
          schema:
            type: string
            enum:
              - asc
              - desc
            default: desc
          description: Sort direction
      responses:
        '200':
          description: Employee booking performance metrics
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Requires Reports access
  /employee/reports/employees/service-performance:
    get:
      summary: Get employee service performance
      description: Track employee performance in service delivery and service revenue
      tags:
        - Employee Reports
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: fromDate
          required: true
          schema:
            type: string
            format: date
          description: Period start date
        - in: query
          name: toDate
          required: true
          schema:
            type: string
            format: date
          description: Period end date
        - in: query
          name: employeeId
          schema:
            type: string
          description: Filter by specific employee
      responses:
        '200':
          description: Employee service performance metrics
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Requires Reports access
  /employee/reports/employees/activity-summary:
    get:
      summary: Get employee activity summary
      description: Aggregate employee activities by type (check-in, checkout, service, etc.)
      tags:
        - Employee Reports
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: fromDate
          schema:
            type: string
            format: date
          description: Period start date
        - in: query
          name: toDate
          schema:
            type: string
            format: date
          description: Period end date
        - in: query
          name: employeeId
          schema:
            type: string
          description: Filter by specific employee
        - in: query
          name: activityTypes
          schema:
            type: string
          description: Comma-separated activity types (CHECK_IN, CHECK_OUT, SERVICE, etc.)
      responses:
        '200':
          description: Employee activity summary by type
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Requires Reports access
  /employee/reports/services/usage-statistics:
    get:
      summary: Get service usage statistics
      description: Show service usage count and status breakdown (completed, pending, cancelled)
      tags:
        - Employee Reports
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: fromDate
          required: true
          schema:
            type: string
            format: date
          description: Period start date
        - in: query
          name: toDate
          required: true
          schema:
            type: string
            format: date
          description: Period end date
        - in: query
          name: serviceId
          schema:
            type: string
          description: Filter by specific service
        - in: query
          name: status
          schema:
            type: string
            enum:
              - PENDING
              - TRANSFERRED
              - COMPLETED
              - CANCELLED
          description: Filter by service usage status
      responses:
        '200':
          description: Service usage statistics with status breakdown
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Requires Reports access
  /employee/reports/services/top-by-revenue:
    get:
      summary: Get top services by revenue
      description: List highest revenue-generating services with usage count and total revenue
      tags:
        - Employee Reports
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: fromDate
          required: true
          schema:
            type: string
            format: date
          description: Period start date
        - in: query
          name: toDate
          required: true
          schema:
            type: string
            format: date
          description: Period end date
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
          description: Number of top services to return
      responses:
        '200':
          description: Top services ranked by revenue
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Requires Reports access
  /employee/reports/services/trend:
    get:
      summary: Get service performance trend
      description: Analyze service usage trends over time with growth rate calculations
      tags:
        - Employee Reports
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: fromDate
          required: true
          schema:
            type: string
            format: date
          description: Trend period start date
        - in: query
          name: toDate
          required: true
          schema:
            type: string
            format: date
          description: Trend period end date
        - in: query
          name: groupBy
          schema:
            type: string
            enum:
              - day
              - week
              - month
            default: day
          description: Grouping interval for trend analysis
        - in: query
          name: serviceId
          schema:
            type: string
          description: Filter by specific service
      responses:
        '200':
          description: Service trend data with growth rates
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Requires Reports access
  /employee/reports/revenue/summary:
    get:
      summary: Get revenue summary
      description: Calculate key hotel KPIs including ADR (Average Daily Rate), RevPAR (Revenue Per Available Room), and occupancy rate
      tags:
        - Employee Reports
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: fromDate
          required: true
          schema:
            type: string
            format: date
          description: Period start date
        - in: query
          name: toDate
          required: true
          schema:
            type: string
            format: date
          description: Period end date
        - in: query
          name: groupBy
          schema:
            type: string
            enum:
              - day
              - week
              - month
              - quarter
              - year
            default: day
          description: Grouping interval for summary
      responses:
        '200':
          description: Revenue summary with ADR, RevPAR, occupancy metrics
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Requires Reports access
  /employee/reports/revenue/by-room-type:
    get:
      summary: Get revenue by room type
      description: Break down revenue and occupancy metrics by room type
      tags:
        - Employee Reports
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: fromDate
          required: true
          schema:
            type: string
            format: date
          description: Period start date
        - in: query
          name: toDate
          required: true
          schema:
            type: string
            format: date
          description: Period end date
      responses:
        '200':
          description: Revenue breakdown by room type with occupancy stats
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Requires Reports access
  /employee/reports/revenue/payment-methods:
    get:
      summary: Get payment method distribution
      description: Show transaction count and total amount by payment method (cash, card, transfer, etc.)
      tags:
        - Employee Reports
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: fromDate
          required: true
          schema:
            type: string
            format: date
          description: Period start date
        - in: query
          name: toDate
          required: true
          schema:
            type: string
            format: date
          description: Period end date
      responses:
        '200':
          description: Payment method distribution with percentages
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Requires Reports access
  /employee/reports/revenue/promotions:
    get:
      summary: Get promotion effectiveness
      description: Analyze promotion ROI, usage count, and revenue impact
      tags:
        - Employee Reports
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: fromDate
          required: true
          schema:
            type: string
            format: date
          description: Period start date
        - in: query
          name: toDate
          required: true
          schema:
            type: string
            format: date
          description: Period end date
      responses:
        '200':
          description: Promotion effectiveness metrics with ROI calculations
        '401':
          description: Unauthorized
        '403':
          description: Forbidden - Requires Reports access
  /employee/roles:
    post:
      summary: Create a new role
      description: Create a new role with permissions (admin only)
      tags:
        - Roles
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                  maxLength: 50
                  description: Role name
                description:
                  type: string
                  maxLength: 255
                  description: Role description
                permissionIds:
                  type: array
                  items:
                    type: string
                  description: Array of permission IDs to assign to role
              example:
                name: MANAGER
                description: Manager with booking and room access
                permissionIds:
                  - perm_id_1
                  - perm_id_2
      responses:
        '201':
          description: Role created successfully
        '400':
          description: Role name already exists or validation error
        '401':
          $ref: '#/components/responses/Unauthorized'
    get:
      summary: Get all roles
      description: Retrieve a paginated list of roles with permissions
      tags:
        - Roles
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Search by name or description
        - in: query
          name: isActive
          schema:
            type: boolean
          description: Filter by active status
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
        - in: query
          name: sortBy
          schema:
            type: string
            enum:
              - name
              - description
              - isActive
              - createdAt
              - updatedAt
            default: createdAt
        - in: query
          name: sortOrder
          schema:
            type: string
            enum:
              - asc
              - desc
            default: desc
      responses:
        '200':
          description: Roles retrieved successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/roles/{roleId}:
    get:
      summary: Get role by ID
      description: Retrieve a specific role with its permissions
      tags:
        - Roles
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roleId
          required: true
          schema:
            type: string
          description: Role ID
      responses:
        '200':
          description: Role retrieved successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Role not found
    patch:
      summary: Update role
      description: Update role information and permissions
      tags:
        - Roles
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roleId
          required: true
          schema:
            type: string
          description: Role ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                  maxLength: 50
                description:
                  type: string
                  maxLength: 255
                isActive:
                  type: boolean
                permissionIds:
                  type: array
                  items:
                    type: string
              example:
                name: SENIOR_MANAGER
                description: Senior manager with full booking access
                isActive: true
                permissionIds:
                  - perm_id_1
                  - perm_id_2
                  - perm_id_3
      responses:
        '200':
          description: Role updated successfully
        '400':
          description: Validation error
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Role not found
    delete:
      summary: Delete role
      description: Delete a role (only if no employees assigned)
      tags:
        - Roles
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roleId
          required: true
          schema:
            type: string
          description: Role ID
      responses:
        '204':
          description: Role deleted successfully
        '400':
          description: Cannot delete role with employees
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Role not found
  /employee/roles/{roleId}/permissions:
    get:
      summary: Get role permissions
      description: Retrieve all permissions assigned to a role
      tags:
        - Roles
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roleId
          required: true
          schema:
            type: string
          description: Role ID
      responses:
        '200':
          description: Permissions retrieved successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Role not found
  /employee/rooms:
    post:
      summary: Create a new room
      description: Create a new room assigned to a room type
      tags:
        - Rooms
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - roomNumber
                - floor
                - roomTypeId
              properties:
                roomNumber:
                  type: string
                  maxLength: 50
                  description: Unique room number
                floor:
                  type: integer
                  description: Floor number
                code:
                  type: string
                  maxLength: 50
                  description: Room code (optional)
                roomTypeId:
                  type: string
                  description: ID of the room type
                status:
                  type: string
                  enum:
                    - AVAILABLE
                    - RESERVED
                    - OCCUPIED
                    - CLEANING
                    - MAINTENANCE
                    - OUT_OF_SERVICE
                  default: AVAILABLE
                  description: Room status
              example:
                roomNumber: '101'
                floor: 1
                roomTypeId: clq1234567890abcdef
                status: AVAILABLE
      responses:
        '201':
          description: Room created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        example: clq1234567890abcdef
                      roomNumber:
                        type: string
                        example: '101'
                      floor:
                        type: integer
                        example: 1
                      status:
                        type: string
                        example: AVAILABLE
                      roomTypeId:
                        type: string
                      roomType:
                        type: object
                        properties:
                          id:
                            type: string
                          name:
                            type: string
                          capacity:
                            type: integer
                          pricePerNight:
                            type: string
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
        '400':
          description: Room number already exists or room type not found
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Room type not found
    get:
      summary: Get all rooms
      description: Retrieve a paginated list of rooms with optional filters
      tags:
        - Rooms
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Search by room number
        - in: query
          name: status
          schema:
            type: string
            enum:
              - AVAILABLE
              - RESERVED
              - OCCUPIED
              - CLEANING
              - MAINTENANCE
              - OUT_OF_SERVICE
          description: Filter by status
        - in: query
          name: floor
          schema:
            type: integer
          description: Filter by floor number
        - in: query
          name: roomTypeId
          schema:
            type: string
          description: Filter by room type ID
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
            minimum: 1
            maximum: 100
          description: Number of items per page
        - in: query
          name: sortBy
          schema:
            type: string
            enum:
              - roomNumber
              - floor
              - status
              - createdAt
              - updatedAt
            default: roomNumber
          description: Field to sort by
        - in: query
          name: sortOrder
          schema:
            type: string
            enum:
              - asc
              - desc
            default: asc
          description: Sort order
      responses:
        '200':
          description: Rooms retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                            roomNumber:
                              type: string
                            floor:
                              type: integer
                            status:
                              type: string
                            roomTypeId:
                              type: string
                            roomType:
                              type: object
                              properties:
                                id:
                                  type: string
                                name:
                                  type: string
                                capacity:
                                  type: integer
                                pricePerNight:
                                  type: string
                            createdAt:
                              type: string
                              format: date-time
                            updatedAt:
                              type: string
                              format: date-time
                            _count:
                              type: object
                              properties:
                                bookingRooms:
                                  type: integer
                      total:
                        type: integer
                        example: 50
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/rooms/available:
    get:
      summary: Search rooms available for date range
      description: Search for rooms that are available for booking in a specific date range. This is the primary endpoint for employees to find rooms when creating bookings.
      tags:
        - Rooms
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: checkInDate
          required: true
          schema:
            type: string
            format: date
          description: Check-in date (YYYY-MM-DD)
        - in: query
          name: checkOutDate
          required: true
          schema:
            type: string
            format: date
          description: Check-out date (YYYY-MM-DD)
        - in: query
          name: search
          schema:
            type: string
          description: Search by room number or code
        - in: query
          name: roomTypeId
          schema:
            type: string
          description: Filter by room type ID
        - in: query
          name: floor
          schema:
            type: integer
          description: Filter by floor number
        - in: query
          name: minCapacity
          schema:
            type: integer
          description: Minimum room capacity
        - in: query
          name: maxCapacity
          schema:
            type: integer
          description: Maximum room capacity
        - in: query
          name: minPrice
          schema:
            type: number
          description: Minimum price per night
        - in: query
          name: maxPrice
          schema:
            type: number
            default: 1
          description: Maximum price per night
        - in: query
          name: page
          schema:
            type: integer
            default: 1
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: Available rooms grouped by room type
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      type: object
                      properties:
                        roomType:
                          type: object
                        availableCount:
                          type: integer
                        rooms:
                          type: array
                  total:
                    type: integer
                  checkInDate:
                    type: string
                  checkOutDate:
                    type: string
        '400':
          description: Invalid date range
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/rooms/check-availability:
    post:
      summary: Bulk check room availability
      description: Check if multiple rooms are available for a date range. Use before creating a booking.
      tags:
        - Rooms
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - roomIds
                - checkInDate
                - checkOutDate
              properties:
                roomIds:
                  type: array
                  items:
                    type: string
                  description: Array of room IDs to check
                checkInDate:
                  type: string
                  format: date
                  description: Check-in date (YYYY-MM-DD)
                checkOutDate:
                  type: string
                  format: date
                  description: Check-out date (YYYY-MM-DD)
      responses:
        '200':
          description: Availability status for each room
          content:
            application/json:
              schema:
                type: object
                properties:
                  allAvailable:
                    type: boolean
                  results:
                    type: array
                    items:
                      type: object
                      properties:
                        roomId:
                          type: string
                        available:
                          type: boolean
                        room:
                          type: object
                        conflictingBookings:
                          type: array
        '400':
          description: Validation error
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/rooms/{roomId}:
    get:
      summary: Get room by ID
      description: Retrieve a specific room's details
      tags:
        - Rooms
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
          description: Room ID
      responses:
        '200':
          description: Room retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        example: clq1234567890abcdef
                      roomNumber:
                        type: string
                        example: '101'
                      floor:
                        type: integer
                        example: 1
                      status:
                        type: string
                        example: AVAILABLE
                      roomTypeId:
                        type: string
                      roomType:
                        type: object
                        properties:
                          id:
                            type: string
                          name:
                            type: string
                          capacity:
                            type: integer
                          pricePerNight:
                            type: string
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
                      _count:
                        type: object
                        properties:
                          bookingRooms:
                            type: integer
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      summary: Update room
      description: Update a room's information
      tags:
        - Rooms
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
          description: Room ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              minProperties: 1
              properties:
                roomNumber:
                  type: string
                  maxLength: 50
                  description: Unique room number
                floor:
                  type: integer
                  description: Floor number
                code:
                  type: string
                  maxLength: 50
                  description: Room code
                roomTypeId:
                  type: string
                  description: ID of the room type
                status:
                  type: string
                  enum:
                    - AVAILABLE
                    - RESERVED
                    - OCCUPIED
                    - CLEANING
                    - MAINTENANCE
                    - OUT_OF_SERVICE
                  description: Room status
              example:
                status: MAINTENANCE
                floor: 2
      responses:
        '200':
          description: Room updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      roomNumber:
                        type: string
                      floor:
                        type: integer
                      status:
                        type: string
                      roomTypeId:
                        type: string
                      roomType:
                        type: object
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
        '400':
          description: Room number already exists or room type not found
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      summary: Delete room
      description: Delete a room from the system
      tags:
        - Rooms
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
          description: Room ID
      responses:
        '204':
          description: Room deleted successfully
        '400':
          description: Cannot delete room with booking history
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /employee/rooms/{roomId}/images:
    post:
      summary: Upload single image for room
      tags:
        - Rooms
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - image
              properties:
                image:
                  type: string
                  format: binary
                isDefault:
                  type: string
                  enum:
                    - 'true'
                    - 'false'
                sortOrder:
                  type: integer
      responses:
        '201':
          description: Image uploaded successfully
  /employee/rooms/{roomId}/images/reorder:
    put:
      summary: Reorder room images
      tags:
        - Rooms
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - imageIds
              properties:
                imageIds:
                  type: array
                  items:
                    type: string
      responses:
        '200':
          description: Images reordered successfully
  /employee/rooms/images/{imageId}:
    delete:
      summary: Delete room image
      tags:
        - Rooms
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: imageId
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Image deleted successfully
  /employee/rooms/images/{imageId}/default:
    put:
      summary: Set image as default for room
      tags:
        - Rooms
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: imageId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Default image set successfully
  /employee/rooms/{roomId}/availability:
    get:
      summary: Check single room availability
      description: Check if a specific room is available for a date range. Returns conflicting bookings if any.
      tags:
        - Rooms
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomId
          required: true
          schema:
            type: string
          description: Room ID
        - in: query
          name: checkInDate
          required: true
          schema:
            type: string
            format: date
          description: Check-in date (YYYY-MM-DD)
        - in: query
          name: checkOutDate
          required: true
          schema:
            type: string
            format: date
          description: Check-out date (YYYY-MM-DD)
      responses:
        '200':
          description: Room availability status
          content:
            application/json:
              schema:
                type: object
                properties:
                  available:
                    type: boolean
                  room:
                    type: object
                  conflictingBookings:
                    type: array
        '400':
          description: Validation error
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Room not found
  /employee/room-tags:
    post:
      summary: Create a new room tag
      tags:
        - Employee Room Tags
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
              properties:
                name:
                  type: string
                description:
                  type: string
      responses:
        '201':
          description: Room tag created
        '400':
          description: Bad request
        '401':
          description: Unauthorized
    get:
      summary: Get all room tags
      tags:
        - Employee Room Tags
      security:
        - bearerAuth: []
      responses:
        '200':
          description: List of room tags
        '401':
          description: Unauthorized
  /employee/room-tags/{tagId}:
    get:
      summary: Get room tag by ID
      tags:
        - Employee Room Tags
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: tagId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Room tag details
        '404':
          description: Room tag not found
    patch:
      summary: Update room tag
      tags:
        - Employee Room Tags
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: tagId
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name:
                  type: string
                description:
                  type: string
      responses:
        '200':
          description: Room tag updated
        '404':
          description: Room tag not found
    delete:
      summary: Delete room tag
      tags:
        - Employee Room Tags
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: tagId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Room tag deleted
        '400':
          description: Cannot delete tag in use
        '404':
          description: Room tag not found
  /employee/room-types:
    post:
      summary: Create a new room type
      description: Create a new room type with pricing and amenities
      tags:
        - Room Types
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - capacity
                - totalBed
                - pricePerNight
              properties:
                name:
                  type: string
                  maxLength: 100
                  description: Room type name
                capacity:
                  type: integer
                  minimum: 1
                  description: Maximum number of guests
                totalBed:
                  type: integer
                  minimum: 0
                  description: Total number of beds in the room
                pricePerNight:
                  type: number
                  minimum: 0
                  description: Price per night (VND)
                tagIds:
                  type: array
                  items:
                    type: string
                  description: Array of room tag IDs (optional)
              example:
                name: Phòng Deluxe
                capacity: 2
                totalBed: 2
                pricePerNight: 1500000
                tagIds:
                  - tag_id_1
                  - tag_id_2
      responses:
        '201':
          description: Room type created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        example: clq1234567890abcdef
                      name:
                        type: string
                        example: Phòng Deluxe
                      capacity:
                        type: integer
                        example: 2
                      pricePerNight:
                        type: string
                        example: '1500000'
                      amenities:
                        type: object
                        example:
                          wifi: true
                          airConditioner: true
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
        '400':
          description: Room type with this name already exists
        '401':
          $ref: '#/components/responses/Unauthorized'
    get:
      summary: Get all room types
      description: Retrieve a paginated list of room types with optional filters
      tags:
        - Room Types
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Search by room type name
        - in: query
          name: minCapacity
          schema:
            type: integer
            minimum: 1
          description: Minimum capacity filter
        - in: query
          name: maxCapacity
          schema:
            type: integer
            minimum: 1
          description: Maximum capacity filter
        - in: query
          name: minPrice
          schema:
            type: number
            minimum: 0
          description: Minimum price filter
        - in: query
          name: maxPrice
          schema:
            type: number
            minimum: 0
          description: Maximum price filter
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
          description: Number of items per page
        - in: query
          name: sortBy
          schema:
            type: string
            enum:
              - name
              - capacity
              - pricePerNight
              - createdAt
              - updatedAt
            default: createdAt
          description: Field to sort by
        - in: query
          name: sortOrder
          schema:
            type: string
            enum:
              - asc
              - desc
            default: desc
          description: Sort order
      responses:
        '200':
          description: Room types retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                            name:
                              type: string
                            capacity:
                              type: integer
                            pricePerNight:
                              type: string
                            amenities:
                              type: object
                            createdAt:
                              type: string
                              format: date-time
                            updatedAt:
                              type: string
                              format: date-time
                            _count:
                              type: object
                              properties:
                                rooms:
                                  type: integer
                                bookingRooms:
                                  type: integer
                      total:
                        type: integer
                        example: 5
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/room-types/{roomTypeId}:
    get:
      summary: Get room type by ID
      description: Retrieve a specific room type's details
      tags:
        - Room Types
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomTypeId
          required: true
          schema:
            type: string
          description: Room type ID
      responses:
        '200':
          description: Room type retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        example: clq1234567890abcdef
                      name:
                        type: string
                        example: Phòng Deluxe
                      capacity:
                        type: integer
                        example: 2
                      pricePerNight:
                        type: string
                        example: '1500000'
                      amenities:
                        type: object
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
                      _count:
                        type: object
                        properties:
                          rooms:
                            type: integer
                          bookingRooms:
                            type: integer
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      summary: Update room type
      description: Update a room type's information
      tags:
        - Room Types
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomTypeId
          required: true
          schema:
            type: string
          description: Room type ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              minProperties: 1
              properties:
                name:
                  type: string
                  maxLength: 100
                  description: Room type name
                capacity:
                  type: integer
                  minimum: 1
                  description: Maximum number of guests
                totalBed:
                  type: integer
                  minimum: 0
                  description: Total number of beds in the room
                pricePerNight:
                  type: number
                  minimum: 0
                  description: Price per night (VND)
                tagIds:
                  type: array
                  items:
                    type: string
                  description: Array of room tag IDs
              example:
                name: Phòng Superior
                pricePerNight: 1800000
      responses:
        '200':
          description: Room type updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      name:
                        type: string
                      capacity:
                        type: integer
                      pricePerNight:
                        type: string
                      amenities:
                        type: object
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
        '400':
          description: Room type with this name already exists
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      summary: Delete room type
      description: Delete a room type from the system
      tags:
        - Room Types
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomTypeId
          required: true
          schema:
            type: string
          description: Room type ID
      responses:
        '204':
          description: Room type deleted successfully
        '400':
          description: Cannot delete room type with associated rooms
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /employee/room-types/{roomTypeId}/images:
    post:
      summary: Upload single image for room type
      description: Upload a single image and associate it with a room type
      tags:
        - Room Types
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomTypeId
          required: true
          schema:
            type: string
          description: Room type ID
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - image
              properties:
                image:
                  type: string
                  format: binary
                  description: Image file (JPEG, PNG, or WebP, max 5MB)
                isDefault:
                  type: string
                  enum:
                    - 'true'
                    - 'false'
                  description: Set as default image
                sortOrder:
                  type: integer
                  description: Sort order for the image
      responses:
        '201':
          description: Image uploaded successfully
        '400':
          description: No file uploaded or invalid file type
        '401':
          $ref: '#/components/responses/Unauthorized'
    get:
      summary: Get all images for a room type
      description: Retrieve all images associated with a room type
      tags:
        - Room Types
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomTypeId
          required: true
          schema:
            type: string
          description: Room type ID
      responses:
        '200':
          description: Images retrieved successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/room-types/{roomTypeId}/images/batch:
    post:
      summary: Upload multiple images for room type
      description: Upload multiple images (up to 10) and associate them with a room type
      tags:
        - Room Types
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomTypeId
          required: true
          schema:
            type: string
          description: Room type ID
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - images
              properties:
                images:
                  type: array
                  items:
                    type: string
                    format: binary
                  description: Image files (JPEG, PNG, or WebP, max 5MB each, up to 10 files)
      responses:
        '200':
          description: All images uploaded successfully
        '207':
          description: Partial success - some images failed to upload
        '400':
          description: No files uploaded
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/room-types/{roomTypeId}/images/reorder:
    put:
      summary: Reorder room type images
      description: Update the sort order of images for a room type
      tags:
        - Room Types
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomTypeId
          required: true
          schema:
            type: string
          description: Room type ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - imageIds
              properties:
                imageIds:
                  type: array
                  items:
                    type: string
                  description: Array of image IDs in desired order
      responses:
        '200':
          description: Images reordered successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/room-types/{roomTypeId}/upload-signature:
    get:
      summary: Get upload signature for direct upload (Mobile)
      description: Generate signed parameters for direct upload to Cloudinary from mobile app
      tags:
        - Room Types
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomTypeId
          required: true
          schema:
            type: string
          description: Room type ID
      responses:
        '200':
          description: Upload signature generated
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/room-types/{roomTypeId}/images/direct:
    post:
      summary: Save image metadata after direct upload
      description: Save image metadata to database after direct upload to Cloudinary from mobile app
      tags:
        - Room Types
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: roomTypeId
          required: true
          schema:
            type: string
          description: Room type ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - cloudinaryId
                - url
                - secureUrl
              properties:
                cloudinaryId:
                  type: string
                url:
                  type: string
                secureUrl:
                  type: string
                width:
                  type: integer
                height:
                  type: integer
                format:
                  type: string
                isDefault:
                  type: boolean
                sortOrder:
                  type: integer
      responses:
        '201':
          description: Image metadata saved successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/room-types/images/{imageId}:
    delete:
      summary: Delete room type image
      description: Delete an image from both Cloudinary and database
      tags:
        - Room Types
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: imageId
          required: true
          schema:
            type: string
          description: Image ID
      responses:
        '204':
          description: Image deleted successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Image not found
  /employee/room-types/images/{imageId}/default:
    put:
      summary: Set image as default for room type
      description: Set a specific image as the default image for its room type
      tags:
        - Room Types
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: imageId
          required: true
          schema:
            type: string
          description: Image ID
      responses:
        '200':
          description: Default image set successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          description: Image not found
  /employee/services:
    post:
      summary: Create a new service
      description: Create a new hotel service with pricing
      tags:
        - Services
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - name
                - price
              properties:
                name:
                  type: string
                  maxLength: 100
                  description: Service name
                price:
                  type: number
                  minimum: 0
                  description: Service price (VND)
                unit:
                  type: string
                  maxLength: 50
                  default: lần
                  description: Unit of service (e.g., "lần", "giờ", "phần")
                isActive:
                  type: boolean
                  default: true
                  description: Whether the service is active
              example:
                name: Giặt ủi
                price: 50000
                unit: kg
                isActive: true
      responses:
        '201':
          description: Service created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        example: clq1234567890abcdef
                      name:
                        type: string
                        example: Giặt ủi
                      price:
                        type: string
                        example: '50000'
                      unit:
                        type: string
                        example: kg
                      isActive:
                        type: boolean
                        example: true
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
        '400':
          description: Service with this name already exists
        '401':
          $ref: '#/components/responses/Unauthorized'
    get:
      summary: Get all services
      description: Retrieve a paginated list of services with optional filters
      tags:
        - Services
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: search
          schema:
            type: string
          description: Search by service name
        - in: query
          name: isActive
          schema:
            type: boolean
          description: Filter by active status
        - in: query
          name: minPrice
          schema:
            type: number
            minimum: 0
          description: Minimum price filter
        - in: query
          name: maxPrice
          schema:
            type: number
            minimum: 0
          description: Maximum price filter
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
          description: Number of items per page
        - in: query
          name: sortBy
          schema:
            type: string
            enum:
              - name
              - price
              - unit
              - isActive
              - createdAt
              - updatedAt
            default: name
          description: Field to sort by
        - in: query
          name: sortOrder
          schema:
            type: string
            enum:
              - asc
              - desc
            default: asc
          description: Sort order
      responses:
        '200':
          description: Services retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      data:
                        type: array
                        items:
                          type: object
                          properties:
                            id:
                              type: string
                            name:
                              type: string
                            price:
                              type: string
                            unit:
                              type: string
                            isActive:
                              type: boolean
                            createdAt:
                              type: string
                              format: date-time
                            updatedAt:
                              type: string
                              format: date-time
                            _count:
                              type: object
                              properties:
                                serviceUsages:
                                  type: integer
                      total:
                        type: integer
                        example: 15
                      page:
                        type: integer
                        example: 1
                      limit:
                        type: integer
                        example: 10
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/services/{serviceId}:
    get:
      summary: Get service by ID
      description: Retrieve a specific service's details
      tags:
        - Services
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: serviceId
          required: true
          schema:
            type: string
          description: Service ID
      responses:
        '200':
          description: Service retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                        example: clq1234567890abcdef
                      name:
                        type: string
                        example: Giặt ủi
                      price:
                        type: string
                        example: '50000'
                      unit:
                        type: string
                        example: kg
                      isActive:
                        type: boolean
                        example: true
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
                      _count:
                        type: object
                        properties:
                          serviceUsages:
                            type: integer
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    put:
      summary: Update service
      description: Update a service's information
      tags:
        - Services
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: serviceId
          required: true
          schema:
            type: string
          description: Service ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              minProperties: 1
              properties:
                name:
                  type: string
                  maxLength: 100
                  description: Service name
                price:
                  type: number
                  minimum: 0
                  description: Service price (VND)
                unit:
                  type: string
                  maxLength: 50
                  description: Unit of service
                isActive:
                  type: boolean
                  description: Whether the service is active
              example:
                price: 60000
                isActive: false
      responses:
        '200':
          description: Service updated successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    properties:
                      id:
                        type: string
                      name:
                        type: string
                      price:
                        type: string
                      unit:
                        type: string
                      isActive:
                        type: boolean
                      createdAt:
                        type: string
                        format: date-time
                      updatedAt:
                        type: string
                        format: date-time
        '400':
          description: Service with this name already exists
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      summary: Delete service
      description: Delete a service from the system
      tags:
        - Services
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: serviceId
          required: true
          schema:
            type: string
          description: Service ID
      responses:
        '204':
          description: Service deleted successfully
        '400':
          description: Cannot delete service with usage history
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /employee/services/{serviceId}/images:
    post:
      summary: Upload single image for service
      description: Upload a single image and associate it with a service
      tags:
        - Services
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: serviceId
          required: true
          schema:
            type: string
          description: Service ID
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - image
              properties:
                image:
                  type: string
                  format: binary
                  description: Image file (JPEG, PNG, or WebP, max 5MB)
                isDefault:
                  type: string
                  enum:
                    - 'true'
                    - 'false'
                sortOrder:
                  type: integer
      responses:
        '201':
          description: Image uploaded successfully
        '400':
          description: No file uploaded or invalid file type
        '401':
          $ref: '#/components/responses/Unauthorized'
    get:
      summary: Get all images for a service
      description: Retrieve all images associated with a service
      tags:
        - Services
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: serviceId
          required: true
          schema:
            type: string
          description: Service ID
      responses:
        '200':
          description: Images retrieved successfully
        '401':
          $ref: '#/components/responses/Unauthorized'
  /employee/services/{serviceId}/images/batch:
    post:
      summary: Upload multiple images for service
      tags:
        - Services
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: serviceId
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - images
              properties:
                images:
                  type: array
                  items:
                    type: string
                    format: binary
      responses:
        '200':
          description: All images uploaded successfully
        '207':
          description: Partial success
  /employee/services/{serviceId}/images/reorder:
    put:
      summary: Reorder service images
      tags:
        - Services
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: serviceId
          required: true
          schema:
            type: string
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - imageIds
              properties:
                imageIds:
                  type: array
                  items:
                    type: string
      responses:
        '200':
          description: Images reordered successfully
  /employee/services/images/{imageId}:
    delete:
      summary: Delete service image
      tags:
        - Services
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: imageId
          required: true
          schema:
            type: string
      responses:
        '204':
          description: Image deleted successfully
        '404':
          description: Image not found
  /employee/services/images/{imageId}/default:
    put:
      summary: Set image as default for service
      tags:
        - Services
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: imageId
          required: true
          schema:
            type: string
      responses:
        '200':
          description: Default image set successfully
  /employee/transaction-details:
    get:
      summary: Search transaction details
      description: Search and filter transaction details by various criteria including amounts, rooms, services, and dates
      tags:
        - Employee Transaction Details
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
          description: Number of items per page
        - in: query
          name: sortBy
          schema:
            type: string
            enum:
              - createdAt
              - baseAmount
              - amount
              - discountAmount
            default: createdAt
          description: Field to sort by
        - in: query
          name: sortOrder
          schema:
            type: string
            enum:
              - asc
              - desc
            default: desc
          description: Sort order
        - in: query
          name: transactionId
          schema:
            type: string
          description: Filter by transaction ID
        - in: query
          name: bookingRoomId
          schema:
            type: string
          description: Filter by booking room ID
        - in: query
          name: serviceUsageId
          schema:
            type: string
          description: Filter by service usage ID
        - in: query
          name: minBaseAmount
          schema:
            type: number
          description: Minimum base amount
        - in: query
          name: maxBaseAmount
          schema:
            type: number
          description: Maximum base amount
        - in: query
          name: minAmount
          schema:
            type: number
          description: Minimum final amount
        - in: query
          name: maxAmount
          schema:
            type: number
          description: Maximum final amount
        - in: query
          name: minDiscountAmount
          schema:
            type: number
          description: Minimum discount amount
        - in: query
          name: maxDiscountAmount
          schema:
            type: number
          description: Maximum discount amount
        - in: query
          name: startDate
          schema:
            type: string
            format: date-time
          description: Filter from this date
        - in: query
          name: endDate
          schema:
            type: string
            format: date-time
          description: Filter until this date
      responses:
        '200':
          description: Transaction details retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  details:
                    type: array
                    items:
                      type: object
                      properties:
                        id:
                          type: string
                        transactionId:
                          type: string
                        baseAmount:
                          type: number
                        discountAmount:
                          type: number
                        amount:
                          type: number
                        transaction:
                          type: object
                        bookingRoom:
                          type: object
                        serviceUsage:
                          type: object
                        usedPromotions:
                          type: array
                  pagination:
                    type: object
                    properties:
                      page:
                        type: integer
                      limit:
                        type: integer
                      total:
                        type: integer
                      totalPages:
                        type: integer
        '401':
          description: Unauthorized
  /employee/transactions:
    get:
      summary: Get transactions with pagination
      description: Retrieve a paginated list of transactions with optional filters
      tags:
        - Employee Transactions
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            minimum: 1
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            minimum: 1
            maximum: 100
            default: 10
          description: Number of items per page
        - in: query
          name: sortBy
          schema:
            type: string
            enum:
              - createdAt
              - occurredAt
              - amount
            default: createdAt
          description: Field to sort by
        - in: query
          name: sortOrder
          schema:
            type: string
            enum:
              - asc
              - desc
            default: desc
          description: Sort order
        - in: query
          name: bookingId
          schema:
            type: string
          description: Filter by booking ID
        - in: query
          name: status
          schema:
            type: string
            enum:
              - PENDING
              - COMPLETED
              - FAILED
              - REFUNDED
          description: Filter by transaction status
        - in: query
          name: type
          schema:
            type: string
            enum:
              - DEPOSIT
              - ROOM_CHARGE
              - SERVICE_CHARGE
              - REFUND
              - ADJUSTMENT
          description: Filter by transaction type
        - in: query
          name: method
          schema:
            type: string
            enum:
              - CASH
              - CREDIT_CARD
              - BANK_TRANSFER
              - E_WALLET
          description: Filter by payment method
        - in: query
          name: startDate
          schema:
            type: string
            format: date-time
          description: Filter transactions from this date
        - in: query
          name: endDate
          schema:
            type: string
            format: date-time
          description: Filter transactions until this date
        - in: query
          name: search
          schema:
            type: string
          description: Search in transaction reference or description
      responses:
        '200':
          description: Transactions retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  transactions:
                    type: array
                    items:
                      type: object
                  pagination:
                    type: object
                    properties:
                      page:
                        type: integer
                      limit:
                        type: integer
                      total:
                        type: integer
                      totalPages:
                        type: integer
        '401':
          description: Unauthorized
    post:
      summary: Create a transaction
      description: Create a transaction for booking payment (full, split room, or service) with optional promotions
      tags:
        - Employee Transactions
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - paymentMethod
                - transactionType
              properties:
                bookingId:
                  type: string
                  description: Booking ID (required for booking-related payments)
                bookingRoomIds:
                  type: array
                  items:
                    type: string
                  description: Specific room IDs for split payment
                serviceUsageId:
                  type: string
                  description: Service usage ID for service payment
                paymentMethod:
                  type: string
                  enum:
                    - CASH
                    - CREDIT_CARD
                    - DEBIT_CARD
                    - BANK_TRANSFER
                    - MOMO
                    - ZALOPAY
                transactionType:
                  type: string
                  enum:
                    - DEPOSIT
                    - ROOM_CHARGE
                    - SERVICE_CHARGE
                    - REFUND
                    - ADJUSTMENT
                description:
                  type: string
                  description: Custom transaction description
                promotionApplications:
                  type: array
                  items:
                    type: object
                    required:
                      - customerPromotionId
                    properties:
                      customerPromotionId:
                        type: string
                      bookingRoomId:
                        type: string
                        description: Apply promotion to specific room
                      serviceUsageId:
                        type: string
                        description: Apply promotion to specific service
            examples:
              fullBooking:
                summary: Full booking payment
                value:
                  bookingId: booking_123
                  paymentMethod: CASH
                  transactionType: DEPOSIT
              splitRoom:
                summary: Split room payment
                value:
                  bookingId: booking_123
                  bookingRoomIds:
                    - room_1
                    - room_2
                  paymentMethod: CREDIT_CARD
                  transactionType: ROOM_CHARGE
              withPromotion:
                summary: Payment with promotion
                value:
                  bookingId: booking_123
                  paymentMethod: CASH
                  transactionType: DEPOSIT
                  promotionApplications:
                    - customerPromotionId: cp_123
                      bookingRoomId: room_1
      responses:
        '201':
          description: Transaction created successfully
        '400':
          description: Invalid request
        '401':
          description: Unauthorized
        '404':
          description: Booking or service not found
  /employee/transactions/{transactionId}:
    get:
      summary: Get transaction details by ID
      description: Retrieve detailed information about a specific transaction
      tags:
        - Employee Transactions
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: transactionId
          required: true
          schema:
            type: string
          description: Transaction ID
      responses:
        '200':
          description: Transaction details retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                  type:
                    type: string
                  status:
                    type: string
                  method:
                    type: string
                  baseAmount:
                    type: number
                  discountAmount:
                    type: number
                  amount:
                    type: number
                  booking:
                    type: object
                  processedBy:
                    type: object
                  details:
                    type: array
                    items:
                      type: object
                  usedPromotions:
                    type: array
                    items:
                      type: object
        '401':
          description: Unauthorized
        '404':
          description: Transaction not found
  /employee/service/service-usage:
    get:
      summary: Get service usages
      description: Retrieve a paginated list of service usages with filters
      tags:
        - Employee Services
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: page
          schema:
            type: integer
            default: 1
          description: Page number
        - in: query
          name: limit
          schema:
            type: integer
            default: 10
          description: Items per page
        - in: query
          name: bookingId
          schema:
            type: string
          description: Filter by booking ID
        - in: query
          name: bookingRoomId
          schema:
            type: string
          description: Filter by booking room ID
        - in: query
          name: startDate
          schema:
            type: string
            format: date-time
          description: Filter by date start
        - in: query
          name: endDate
          schema:
            type: string
            format: date-time
          description: Filter by date end
      responses:
        '200':
          description: List of service usages
        '401':
          description: Unauthorized
    post:
      summary: Create a service usage record
      description: Record service consumption for a booking or guest user. BookingId and bookingRoomId are optional for guest users.
      tags:
        - Employee Services
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - serviceId
                - quantity
              properties:
                bookingId:
                  type: string
                  description: Booking ID (optional - omit for guest users)
                bookingRoomId:
                  type: string
                  description: Specific booking room ID (optional)
                serviceId:
                  type: string
                  description: Service ID
                quantity:
                  type: integer
                  minimum: 1
                  description: Quantity of service consumed
                note:
                  type: string
                  maxLength: 500
                  description: Optional note for service usage
              example:
                bookingId: booking_id_123
                bookingRoomId: booking_room_id_456
                serviceId: service_id_789
                quantity: 2
      responses:
        '201':
          description: Service usage created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: object
                    description: Created service usage record
        '400':
          description: Invalid request or validation error
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
  /employee/service/service-usage/{id}:
    patch:
      summary: Update a service usage record
      description: Update quantity or status of a service usage
      tags:
        - Employee Services
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Service usage ID
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                quantity:
                  type: integer
                  minimum: 1
                  description: New quantity (optional)
                status:
                  type: string
                  enum:
                    - PENDING
                    - COMPLETED
                    - CANCELLED
                  description: New status (optional)
              example:
                quantity: 3
      responses:
        '200':
          description: Service usage updated successfully
        '400':
          description: Cannot update paid service usage
        '401':
          $ref: '#/components/responses/Unauthorized'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      summary: Delete service usage
      description: Delete a service usage record (if not paid/audited)
      tags:
        - Employee Services
      security:
        - bearerAuth: []
      parameters:
        - in: path
          name: id
          required: true
          schema:
            type: string
          description: Service usage ID
      responses:
        '200':
          description: Service usage deleted successfully
        '400':
          description: Cannot delete paid/audited service usage
        '401':
          description: Unauthorized
        '404':
          description: Service usage not found
  /employee/service/penalty:
    post:
      summary: Create a penalty charge
      description: Apply a penalty charge with custom price to a booking or guest
      tags:
        - Employee Services
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - customPrice
                - reason
              properties:
                bookingId:
                  type: string
                  description: Optional booking ID
                bookingRoomId:
                  type: string
                  description: Optional booking room ID
                customPrice:
                  type: number
                  minimum: 0
                  description: Custom penalty amount
                  example: 100000
                quantity:
                  type: integer
                  minimum: 1
                  default: 1
                  description: Number of penalty units
                reason:
                  type: string
                  minLength: 3
                  maxLength: 500
                  description: Reason for penalty
                  example: Hư hỏng tài sản phòng
      responses:
        '201':
          description: Penalty created successfully
        '400':
          description: Invalid input
        '401':
          description: Unauthorized
        '404':
          description: Booking or room not found
  /employee/service/surcharge:
    post:
      summary: Create a surcharge fee
      description: Apply a surcharge fee with custom price to a booking or guest
      tags:
        - Employee Services
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - customPrice
                - reason
              properties:
                bookingId:
                  type: string
                  description: Optional booking ID
                bookingRoomId:
                  type: string
                  description: Optional booking room ID
                customPrice:
                  type: number
                  minimum: 0
                  description: Custom surcharge amount
                  example: 50000
                quantity:
                  type: integer
                  minimum: 1
                  default: 1
                  description: Number of surcharge units
                reason:
                  type: string
                  minLength: 3
                  maxLength: 500
                  description: Reason for surcharge
                  example: Phụ thu giờ cao điểm
      responses:
        '201':
          description: Surcharge created successfully
        '400':
          description: Invalid input
        '401':
          description: Unauthorized
        '404':
          description: Booking or room not found
  /health:
    get:
      summary: Health check endpoint
      description: Returns the current health status of the API server
      tags:
        - Health
      responses:
        '200':
          description: API is healthy and running
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: string
                    example: ok
                    description: Health status of the API
                  timestamp:
                    type: string
                    format: date-time
                    example: '2026-01-10T03:14:05.575Z'
                    description: Current server timestamp
                  uptime:
                    type: number
                    example: 588.595360349
                    description: Server uptime in seconds
                  environment:
                    type: string
                    example: development
                    enum:
                      - development
                      - production
                      - test
                    description: Current environment
tags:
  - name: Customer Auth
    description: Customer authentication endpoints
  - name: Customer Bookings
    description: Customer booking management endpoints
  - name: Customer Images
    description: Customer endpoints for viewing room and room type images
  - name: Customer Profile
    description: Customer profile management endpoints
  - name: Customer Promotions
    description: Customer promotion endpoints
  - name: Customer Rooms
    description: Customer room search and availability endpoints
  - name: Customer Services
    description: Customer service usage endpoints (DEPRECATED - Employee only operations)
  - name: Employee Activities
    description: Employee activity log endpoints
  - name: Employee App Settings
    description: Application settings management endpoints for employees
  - name: Employee Auth
    description: Employee authentication endpoints
  - name: Employee Bookings
    description: Employee booking management endpoints
  - name: Employee Customer Rank
    description: Customer rank management endpoints for employees
  - name: Customer Management
    description: Customer management endpoints for employees
  - name: Employee Management
    description: Employee management endpoints for administrators
  - name: Permissions
    description: Permission management endpoints
  - name: Employee Pricing Rules
    description: Employee pricing rule management endpoints
  - name: Employee Profile
    description: Employee profile management endpoints
  - name: Employee Promotions
    description: Employee promotion management endpoints
  - name: Employee Reports
    description: Hotel management reports for employees
  - name: Roles
    description: Role management endpoints
  - name: Rooms
    description: Room management endpoints
  - name: Employee Room Tags
    description: Room tag management endpoints
  - name: Room Types
    description: Room type management endpoints
  - name: Services
    description: Hotel service management endpoints
  - name: Employee Transaction Details
    description: Employee transaction details search endpoints
  - name: Employee Transactions
    description: Employee transaction management endpoints
  - name: Employee Services
    description: Employee service usage management endpoints
